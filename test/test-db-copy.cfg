process TEST =
{
    include "FWCore/MessageService/data/MessageLogger.cfi"
    
    source = EmptySource { untracked int32 maxEvents = 1 }
    

    // Reading from DB
    include "CondCore/DBCommon/data/CondDBSetup.cfi"
    es_source = PoolDBESSource {
        using CondDBSetup
        string connect = "sqlite_file:Alignments.db"    
        untracked string catalog = "file:conddbcatalog.xml"
        string timetype = "runnumber"
        VPSet toGet = 
        {
            { string record = "TrackerAlignmentRcd"
                string tag = "TrackerLongTermScenario" },
            { string record = "TrackerAlignmentErrorRcd"
                string tag = "TrackerLongTermScenarioErrors" }
        }
    }

    // Database output service
    service = PoolDBOutputService {
        using CondDBSetup
        string connect = "sqlite_file:dataout.db"    
        untracked string catalog = "file:catalogout.xml"
        string timetype = "runnumber"
        VPSet toPut = {
            { string record = "TrackerAlignmentRcd" string tag = "TrackerLongTermScenario" },
            { string record = "TrackerAlignmentErrorRcd" 
                string tag = "TrackerLongTermScenarioErrors" }
        }
    }
    
    module dbCopy = TestDBCopy { }
    
    path p = { dbCopy }

}

